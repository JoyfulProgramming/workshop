<div hx-get="<%= update_progress_pattern_path(@pattern) %>" hx-trigger="<%= @pattern.finished_generating_preview? ? '' : 'every 2s' %>" hx-swap="outerHTML">
  <% if @pattern.generating_preview? %>
    <div class="grid grid-cols-5 gap-4 animate-pulse">
      <% ([:loading] * 5).each do |image| %>
        <%= image_tag "#{image}.png", alt: "Loading...", width: 2000, height: 2666 %>
      <% end %>
    </div>
  <% elsif @pattern.not_generating_preview? %>
    <p class="text-center mb-6 text-gray-600">Preview generation will start soon...</p>
  <% elsif @pattern.finished_generating_preview? %>
    <div class="grid grid-cols-5 gap-4">
      <% @pattern.images.each do |image| %>
        <%= image_tag image, alt: "Pattern Preview for #{@pattern.name}", width: 2000, height: 2666 %>
      <% end %>
    </div>
  <% end %>
</div>